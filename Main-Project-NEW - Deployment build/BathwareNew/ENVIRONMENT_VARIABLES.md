# üîê Environment Variables Reference

This document lists all environment variables needed for deployment.

---

## üñ•Ô∏è Backend Environment Variables (Render)

Set these in Render Dashboard ‚Üí Your Service ‚Üí Environment tab

### Database Configuration

| Variable | Description | Example Value |
|----------|-------------|---------------|
| `DB_HOST` | Database host address | `dpg-xxxxx.oregon-postgres.render.com` |
| `DB_PORT` | Database port | `5432` |
| `DB_NAME` | Database name | `bathware` |
| `DB_USERNAME` | Database username | `bathware_user` |
| `DB_PASSWORD` | Database password | (auto-generated by Render) |

### Application Configuration

| Variable | Description | Example Value |
|----------|-------------|---------------|
| `SPRING_PROFILES_ACTIVE` | Active Spring profile | `prod` |
| `UPLOADS_DIR` | Directory for payment slip uploads | `/app/uploads/bills` |
| `PRODUCT_IMAGES_DIR` | Directory for product image uploads | `/app/uploads/images` |

### Email Configuration

| Variable | Description | Example Value |
|----------|-------------|---------------|
| `EMAIL_USERNAME` | Gmail address for sending emails | `your-email@gmail.com` |
| `EMAIL_PASSWORD` | Gmail app password | `abcd efgh ijkl mnop` |

‚ö†Ô∏è **Important:** Use a [Gmail App Password](https://support.google.com/accounts/answer/185833), not your regular Gmail password.

### CORS Configuration

| Variable | Description | Example Value |
|----------|-------------|---------------|
| `CORS_ORIGINS` | Allowed frontend URLs | `https://your-site.netlify.app` |

---

## üåê Frontend Environment Variables (Netlify)

Set these in Netlify Dashboard ‚Üí Site settings ‚Üí Environment variables

| Variable | Description | Example Value |
|----------|-------------|---------------|
| `REACT_APP_API_URL` | Backend API base URL | `https://bathware-backend.onrender.com` |

‚ö†Ô∏è **Important:** 
- Variable name MUST start with `REACT_APP_` for React
- No trailing slash in the URL
- Must be set BEFORE building the frontend

---

## üìã Quick Copy-Paste Template

### For Render (Backend):

```
SPRING_PROFILES_ACTIVE=prod
DB_HOST=<your-database-host>
DB_PORT=5432
DB_NAME=bathware
DB_USERNAME=<your-database-username>
DB_PASSWORD=<your-database-password>
EMAIL_USERNAME=<your-gmail-address>
EMAIL_PASSWORD=<your-gmail-app-password>
UPLOADS_DIR=/app/uploads/bills
PRODUCT_IMAGES_DIR=/app/uploads/images
CORS_ORIGINS=https://<your-netlify-site>.netlify.app
```

### For Netlify (Frontend):

```
REACT_APP_API_URL=https://<your-backend>.onrender.com
```

---

## üîç How to Find Database Values

1. Go to Render Dashboard
2. Click on your database service
3. Click on "Connect" tab
4. Find the "Internal Database URL" or "External Database URL"
5. It will look like: `postgres://username:password@host:port/database`

Parse it:
- **DB_HOST:** The part after `@` and before `:port`
- **DB_PORT:** Usually `5432`
- **DB_NAME:** The part after the last `/`
- **DB_USERNAME:** The part after `postgres://` and before `:`
- **DB_PASSWORD:** The part after first `:` and before `@`

---

## üîÑ Updating Environment Variables

### On Render:
1. Go to Dashboard ‚Üí Your Service
2. Click "Environment" tab
3. Click "Add Environment Variable" or edit existing
4. Click "Save Changes"
5. Service will automatically redeploy

### On Netlify:
1. Go to Site settings ‚Üí Environment variables
2. Click "Add a variable" or edit existing
3. Click "Save"
4. Go to Deploys ‚Üí Trigger deploy ‚Üí "Clear cache and deploy site"

---

## üîí Security Best Practices

1. ‚úÖ **Never** commit environment variables to Git
2. ‚úÖ **Never** share your `.env` files
3. ‚úÖ **Always** use different values for development and production
4. ‚úÖ **Always** use Gmail App Passwords, not your main password
5. ‚úÖ **Regularly** rotate your passwords and API keys
6. ‚úÖ **Keep** a secure backup of your environment variables

---

## üß™ Testing Environment Variables

### Test Backend Variables:

After deploying, check the logs in Render:
```
Starting application...
Loaded active profile: prod
Database connection: SUCCESS
Mail configuration: SUCCESS
```

### Test Frontend Variables:

Open browser console on your deployed site:
```javascript
console.log(process.env.REACT_APP_API_URL);
// Should print: https://bathware-backend.onrender.com
```

Or check network tab to see if API calls are going to the correct URL.

---

## ‚ùå Common Mistakes

| Mistake | Problem | Solution |
|---------|---------|----------|
| Missing `REACT_APP_` prefix | Variable not accessible in React | Add prefix: `REACT_APP_API_URL` |
| Trailing slash in URL | API calls go to wrong endpoint | Remove slash: `http://api.com` not `http://api.com/` |
| Using regular Gmail password | Authentication fails | Use App Password from Google |
| Wrong CORS URL | Frontend can't connect | Must match Netlify URL exactly |
| Not redeploying after changes | Old values still in use | Trigger new deployment |

---

## üìû Need Help?

If environment variables aren't working:

1. Check spelling (case-sensitive!)
2. Check for extra spaces
3. Check logs for error messages
4. Verify values are correct
5. Try redeploying the service

---

**Last Updated:** October 2025

